{"version":3,"sources":["../src/webcam.component.ts"],"names":[],"mappings":"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","file":"webcam.component.js","sourceRoot":"","sourcesContent":["import { Component, ElementRef, Input, Output, EventEmitter } from '@angular/core'\r\nimport { DomSanitizer } from '@angular/platform-browser'\r\nimport {\r\n  browser,\r\n  getMedia,\r\n  Options,\r\n  dataUriToFormData,\r\n  videoInputsByDevices,\r\n  Fallback,\r\n  //MediaDevice,\r\n  promiseDevices,\r\n  promiseDeviceById\r\n} from \"./videoHelp\"\r\n\r\nconst template = `<video id=\"video\" *ngIf=\"(isSupportUserMedia||isSupportWebRTC)\" autoplay=\"\" playsinline=\"\">Video stream not available</video>`\r\n\r\nexport interface vidElmOptions{\r\n  audio: boolean | MediaTrackConstraints\r\n  video: boolean | MediaTrackConstraints\r\n}\r\n\r\n export class WebCamComponent {\r\n  /* platform support variables */\r\n    flashPlayer:Fallback\r\n    isSupportUserMedia: boolean = false\r\n    isSupportWebRTC: boolean = false\r\n    isFallback: boolean = false\r\n  /* end: platform support variables */\r\n  \r\n  initComplete:boolean\r\n  observer:MutationObserver\r\n  onResize:()=>any\r\n  stream:MediaStream\r\n\r\n   videoDevice:MediaDeviceInfo\r\n   videoDeviceId:string\r\n  //@Input() audioDeviceId:string\r\n  \r\n   reflect:boolean\r\n   facingMode:\"user\"|\"environment\"|\"left\"|\"right\"|string\r\n   mime = 'image/jpeg'\r\n   useParentWidthHeight:boolean = false\r\n  \r\n   options: Options\r\n   success = new EventEmitter()\r\n\r\n  //-Lazy @ViewChild() variable reference\r\n   ref:WebCamComponent\r\n   refChange:EventEmitter<WebCamComponent> = new EventEmitter()\r\n  \r\n   error:Error\r\n   errorChange:EventEmitter<Error> = new EventEmitter()\r\n   catcher:EventEmitter<Error> = new EventEmitter()\r\n\r\n  constructor(private sanitizer: DomSanitizer, private element: ElementRef){}\r\n\r\n  ngOnInit(){\r\n    this.isSupportUserMedia = getMedia()!=null ? true : false\r\n    this.isSupportUserMedia = false\r\n    this.isSupportWebRTC = !!(browser.mediaDevices && browser.mediaDevices.getUserMedia)\r\n\r\n  }\r\n\r\n  ngAfterViewInit(){\r\n    this.applyDefaults()\r\n    setTimeout(()=>this.afterInitCycles(), 0)\r\n  }\r\n\r\n  ngOnChanges( changes ) {\r\n    if( !this.initComplete )return\r\n\r\n    if( changes.facingMode ){\r\n      this.startCapturingVideo()//restart\r\n    }\r\n\r\n    if( changes.reflect ){\r\n      this.applyReflect()\r\n    }\r\n  }\r\n\r\n  afterInitCycles(){\r\n    const media = getMedia()\r\n\r\n    // Older browsers might not implement mediaDevices at all, so we set an empty object first\r\n    if ((browser.mediaDevices === undefined) && !!media) {\r\n      browser.mediaDevices = {}\r\n    }\r\n\r\n    // Some browsers partially implement mediaDevices. We can't just assign an object\r\n    // with getUserMedia as it would overwrite existing properties.\r\n    // Here, we will just add the getUserMedia property if it's missing.\r\n    const getUserMediaUndefined = (browser.mediaDevices && browser.mediaDevices.getUserMedia === undefined) && !!media\r\n    if( getUserMediaUndefined ){\r\n      browser.mediaDevices.getUserMedia = constraints=>{\r\n        return new Promise((resolve, reject)=>{\r\n          const userMedia = media.call(browser, constraints, resolve, reject)\r\n\r\n          if( userMedia.then ){\r\n            userMedia.then( stream=>this.applyStream(stream) )\r\n          }\r\n        })\r\n        .catch( err=>this.catchError(err) )\r\n      }\r\n    }\r\n\r\n    this.initComplete = true\r\n    \r\n    //deprecated. Use angular hash template referencing and @ViewChild\r\n    setTimeout(()=>this.refChange.emit(this), 0)\r\n\r\n    this.createVideoResizer()\r\n    \r\n    this.startCapturingVideo()\r\n    .then( ()=>setTimeout(()=>this.resize(), 10) )\r\n    .catch( err=>this.catchError(err) )\r\n  }\r\n\r\n  applyReflect(){\r\n    const videoElm = this.getVideoElm()\r\n\r\n    if(!videoElm)return\r\n\r\n    if( this.reflect ){\r\n      videoElm.style.transform = \"scaleX(-1)\"\r\n    }else{\r\n      videoElm.style.transform = \"scaleX(1)\"\r\n    }\r\n  }\r\n\r\n  applyStream(stream){\r\n    const videoElm = this.getVideoElm()\r\n    videoElm.srcObject = stream\r\n    this.applyReflect()\r\n  }\r\n\r\n  createVideoResizer(){\r\n    this.observer = new MutationObserver( ()=>this.resize() )\r\n    \r\n    const config = {\r\n      attributes: true,\r\n      childList: true,\r\n      characterData: true\r\n      //,subtree: true\r\n    }\r\n    this.observer.observe(this.element.nativeElement, config)\r\n\r\n    this.onResize = ()=>this.resize()\r\n    window.addEventListener('resize', this.onResize)\r\n  }\r\n\r\n  applyDefaults(){\r\n    this.options = this.options || <Options>{}\r\n    this.options.fallbackSrc = this.options.fallbackSrc || 'jscam_canvas_only.swf'\r\n    this.options.fallbackMode = this.options.fallbackMode || 'callback'\r\n    this.options.fallbackQuality = this.options.fallbackQuality || 200\r\n    this.isFallback = this.options.fallback || (!this.isSupportUserMedia && !this.isSupportWebRTC && this.options.fallbackSrc) ? true : false\r\n\r\n    if(!this.options.video && !this.options.audio){\r\n      this.options.video = true\r\n    }\r\n  }\r\n\r\n  onWebRTC(): Promise<MediaStream> {\r\n    let promise:Promise<MediaDeviceInfo> = Promise.resolve(null)\r\n\r\n    return this.promiseVideoOptions()\r\n    .then( options=>{\r\n      this.options.video = options\r\n      return this.setWebcam(this.options)\r\n    })\r\n  }\r\n\r\n  promiseVideoOptions():Promise<MediaTrackConstraints>{\r\n    let promise = Promise.resolve()\r\n    const videoOptions:MediaTrackConstraints = {}\r\n\r\n    if( this.facingMode ){\r\n      videoOptions.facingMode = this.facingMode//{exact:this.facingMode}\r\n    }else{\r\n      videoOptions.deviceId = this.videoDevice ? this.videoDevice.deviceId : this.videoDeviceId\r\n    }\r\n\r\n    return promise.then( ()=>videoOptions )\r\n  }\r\n\r\n  //old method name (deprecated)\r\n  resizeVideo(maxAttempts=4){\r\n    return this.resize(maxAttempts)\r\n  }\r\n\r\n  resize(maxAttempts=4){\r\n    const video = this.getVideoElm()\r\n    \r\n    if(!video)return\r\n\r\n    video.style.position='absolute'\r\n    //video.width = 0\r\n    //video.height = 0\r\n    \r\n    const elm = this.useParentWidthHeight ? this.element.nativeElement.parentNode : this.element.nativeElement\r\n\r\n    let width = this.options.width || parseInt(elm.offsetWidth, 10)\r\n    let height = this.options.height || parseInt(elm.offsetHeight, 10)\r\n\r\n    if(!width || !height){\r\n      width = 320\r\n      height = 240\r\n    }\r\n\r\n    setTimeout(()=>{\r\n      video.width = width\r\n      video.height = height\r\n      video.style.position='static'\r\n  \r\n      //now that we set a width and height, it may need another adjustment if it pushed percent based items around\r\n      const resizeAgain = (!this.options.width && width!=parseInt(elm.offsetWidth, 10)) || (!this.options.height && height!=parseInt(elm.offsetHeight, 10))\r\n  \r\n      if( resizeAgain && maxAttempts){\r\n        this.resize( --maxAttempts )\r\n      }\r\n    }, 1)\r\n  }\r\n\r\n  getVideoDimensions(video){\r\n    video = video || this.getVideoElm()\r\n    const dim = {width:0, height:0}\r\n\r\n    if(video.videoWidth){\r\n      dim.width = video.videoWidth\r\n      dim.height = video.videoHeight\r\n    }else{\r\n      dim.width = this.options.width || parseInt(this.element.nativeElement.offsetWidth, 10)\r\n      dim.height = this.options.height || parseInt(this.element.nativeElement.offsetHeight, 10)\r\n    }\r\n\r\n    if(!dim.width)dim.width = 320\r\n    if(!dim.height)dim.height = 240\r\n\r\n    return dim\r\n  }\r\n\r\n  getVideoElm(){\r\n    const native = this.element.nativeElement\r\n    const elmType = this.isFallback ? 'object' : 'video'\r\n    return native.getElementsByTagName(elmType)[0]\r\n  }\r\n\r\n  setWebcam(options:Options): Promise<MediaStream> {\r\n    return this.promiseStreamByVidOptions(options)\r\n    .then(stream=>{\r\n      this.applyStream(stream)\r\n      this.processSuccess(stream)\r\n      this.stream = stream\r\n      return stream\r\n    })\r\n    .catch( err=>this.catchError(err) )\r\n  }\r\n\r\n  catchError(err:Error):Promise<any>{\r\n    this.errorChange.emit(this.error=err)\r\n    this.catcher.emit(err)\r\n\r\n    if( !this.errorChange.observers.length && !this.catcher.observers.length ){\r\n      return Promise.reject(err)//if no error subscriptions promise need to continue to be Uncaught\r\n    }\r\n  }\r\n\r\n  promiseStreamByVidOptions(optionObject:vidElmOptions):Promise<MediaStream>{\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        browser.mediaDevices.getUserMedia(optionObject)\r\n        .then(stream=>resolve(stream))\r\n        .catch((objErr:any)=>reject(objErr))\r\n      } catch (e) {\r\n        reject(e)\r\n      }\r\n    })\r\n  }\r\n\r\n  processSuccess(stream?){\r\n    if (this.isFallback) {\r\n      this.setupFallback()\r\n    }else{\r\n      this.success.emit(stream)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Start capturing video stream\r\n   * @returns {void}\r\n   */\r\n  startCapturingVideo(): Promise<any> {\r\n    if (!this.isFallback && this.isSupportWebRTC) {\r\n      return this.onWebRTC()\r\n    }\r\n\r\n    return Promise.resolve( this.processSuccess() )\r\n  }\r\n\r\n  ngOnDestroy(){\r\n    this.observer.disconnect()\r\n    window.removeEventListener('resize', this.onResize)\r\n\r\n    const vid = this.getVideoElm()\r\n\r\n    if(vid && vid.pause){\r\n      vid.pause()\r\n    }\r\n\r\n    if( this.stream ){\r\n      this.stream.getTracks().forEach(track=>track.stop())\r\n      //this.stream.getTracks()[0].stop()\r\n    }\r\n  }\r\n\r\n  getCanvas(){\r\n    return document.createElement('canvas')\r\n  }\r\n\r\n  /** returns promise . @mime - null=png . Also accepts image/jpeg */\r\n  getBase64(mime?){\r\n    if(this.isFallback){\r\n      return this.flashPlayer.captureBase64(mime||this.mime)\r\n      //return this.getFallbackBase64(mime)\r\n    }else{\r\n      const canvas = this.getCanvas()\r\n      const video = this.getVideoElm()\r\n      this.setCanvasWidth(canvas, video)\r\n      const ctx = canvas.getContext('2d')\r\n\r\n      if( this.reflect ){\r\n        ctx.translate(canvas.width, 0);\r\n        ctx.scale(-1, 1);\r\n      }\r\n\r\n      ctx.drawImage(video, 0, 0)\r\n      return Promise.resolve( canvas.toDataURL(mime) )\r\n    }\r\n  }\r\n\r\n  setCanvasWidth(canvas?, video?){\r\n    const di = this.getVideoDimensions(video)\r\n    canvas = canvas || this.getCanvas()\r\n    canvas.width = di.width\r\n    canvas.height = di.height\r\n  }\r\n\r\n  /** older browsers (IE11) cannot dynamically apply most attribute changes to object elements. Use this method during fallback */\r\n  createVidElmOb(){\r\n    const rtnElm = document.createElement('object')\r\n    rtnElm.innerHTML = 'Video stream not available'\r\n    rtnElm.setAttribute('type','application/x-shockwave-flash')\r\n    rtnElm.setAttribute('data',this.options.fallbackSrc)\r\n\r\n    let paramVar = document.createElement('param')\r\n    paramVar.setAttribute('name','FlashVars')\r\n    paramVar.setAttribute('value','mode=callback&amp;quality=200')\r\n    rtnElm.appendChild( paramVar )\r\n\r\n    paramVar = document.createElement('param')\r\n    paramVar.setAttribute('name','allowScriptAccess')\r\n    paramVar.setAttribute('value','always')\r\n    rtnElm.appendChild( paramVar )\r\n\r\n    paramVar = document.createElement('param')\r\n    paramVar.setAttribute('name','movie')\r\n    paramVar.setAttribute('value',this.options.fallbackSrc)\r\n    rtnElm.appendChild( paramVar )\r\n\r\n    const obs = this.element.nativeElement.getElementsByTagName('object')\r\n    if(obs.length){\r\n      this.element.nativeElement.removeChild( obs[0] )\r\n    }\r\n\r\n    this.element.nativeElement.appendChild( rtnElm )\r\n\r\n    return rtnElm\r\n  }\r\n\r\n  setupFallback(): void {\r\n    this.isFallback = true\r\n    const vidElm = this.getVideoElm() || this.createVidElmOb()\r\n    this.flashPlayer = new Fallback( vidElm )\r\n  }\r\n\r\n  /** single image to FormData */\r\n  captureAsFormData(options?:{mime?:string, fileName?:string, form?:FormData}){\r\n    options = options || {}\r\n    return this.getBase64(options.mime)\r\n    .then( base64=>dataUriToFormData(base64, {fileName:options.fileName}) )\r\n  }\r\n\r\n  dataUriToFormData(base64, options){\r\n    return dataUriToFormData(base64, {fileName:options.fileName})\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'ack-webcam',\r\n  template: template,\r\n  exportAs: 'webcam'\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: DomSanitizer, },\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'videoDevice': [{ type: Input },],\n'videoDeviceId': [{ type: Input },],\n'reflect': [{ type: Input },],\n'facingMode': [{ type: Input },],\n'mime': [{ type: Input },],\n'useParentWidthHeight': [{ type: Input },],\n'options': [{ type: Input },],\n'success': [{ type: Output },],\n'ref': [{ type: Input },],\n'refChange': [{ type: Output },],\n'error': [{ type: Input },],\n'errorChange': [{ type: Output },],\n'catcher': [{ type: Output, args: ['catch', ] },],\n};\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}